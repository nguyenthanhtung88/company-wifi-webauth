20170608161158
20170608162606
/usr/bin/git
/usr/bin/git
$ /usr/bin/git clone "git@github.com:nguyenthanhtung88/company-wifi-webauth.git" "/var/www/html/login/releases/20170608164312" --branch="master" --depth="1"
/usr/bin/git clone "git@github.com:nguyenthanhtung88/company-wifi-webauth.git" "/var/www/html/login/releases/20170608164312" --branch="master" --depth="1"
Cloning into '/var/www/html/login/releases/20170608164312'...
/usr/bin/git
/usr/bin/git
$ cd /var/www/html/login/releases/20170608164312
$ /usr/bin/git submodule update --init --recursive
cd /var/www/html/login/releases/20170608164312
/usr/bin/git submodule update --init --recursive

/usr/local/bin/composer
$ cd /var/www/html/login/releases/20170608164312
$ /usr/local/bin/composer install --no-interaction --no-dev --prefer-dist
cd /var/www/html/login/releases/20170608164312
/usr/local/bin/composer install --no-interaction --no-dev --prefer-dist
Loading composer repositories with package information
Installing dependencies from lock file
Package operations: 33 installs, 0 updates, 0 removals
  - Installing doctrine/inflector (v1.1.0): Loading from cache
  - Installing erusev/parsedown (1.6.2): Loading from cache
  - Installing fzaninotto/faker (v1.6.0): Loading from cache
  - Installing jakub-onderka/php-console-color (0.1): Loading from cache
  - Installing symfony/polyfill-mbstring (v1.3.0): Loading from cache
  - Installing symfony/var-dumper (v3.3.0): Loading from cache
  - Installing psr/log (1.0.2): Loading from cache
  - Installing symfony/debug (v3.3.0): Loading from cache
  - Installing symfony/console (v3.3.0): Loading from cache
  - Installing nikic/php-parser (v3.0.5): Loading from cache
  - Installing jakub-onderka/php-console-highlighter (v0.3.2): Loading from cache
  - Installing dnoegel/php-xdg-base-dir (0.1): Loading from cache
  - Installing psy/psysh (v0.8.5): Loading from cache
  - Installing vlucas/phpdotenv (v2.4.0): Loading from cache
  - Installing symfony/css-selector (v3.3.0): Loading from cache
  - Installing tijsverkoyen/css-to-inline-styles (2.2.0): Loading from cache
  - Installing symfony/routing (v3.3.0): Loading from cache
  - Installing symfony/process (v3.3.0): Loading from cache
  - Installing symfony/http-foundation (v3.3.0): Loading from cache
  - Installing symfony/event-dispatcher (v3.3.0): Loading from cache
  - Installing symfony/http-kernel (v3.3.0): Loading from cache
  - Installing symfony/finder (v3.3.0): Loading from cache
  - Installing swiftmailer/swiftmailer (v5.4.8): Loading from cache
  - Installing paragonie/random_compat (v2.0.10): Loading from cache
  - Installing ramsey/uuid (3.6.1): Loading from cache
  - Installing symfony/translation (v3.3.0): Loading from cache
  - Installing nesbot/carbon (1.22.1): Loading from cache
  - Installing mtdowling/cron-expression (v1.2.0): Loading from cache
  - Installing monolog/monolog (1.22.1): Loading from cache
  - Installing league/flysystem (1.0.40): Loading from cache
  - Installing laravel/framework (v5.4.24): Loading from cache
  - Installing laravel/tinker (v1.0.1): Loading from cache
  - Installing laravelcollective/html (v5.4.8): Loading from cache
Generating optimized autoload files
> Illuminate\Foundation\ComposerScripts::postInstall
> php artisan optimize
Generating optimized class loader
The compiled services file has been removed.
$ rm -rf /var/www/html/login/releases/20170608164312/storage
rm -rf /var/www/html/login/releases/20170608164312/storage

$ ln -s /var/www/html/login/shared/storage /var/www/html/login/releases/20170608164312/storage-temp
$ mv -Tf /var/www/html/login/releases/20170608164312/storage-temp /var/www/html/login/releases/20170608164312/storage
ln -s /var/www/html/login/shared/storage /var/www/html/login/releases/20170608164312/storage-temp
mv -Tf /var/www/html/login/releases/20170608164312/storage-temp /var/www/html/login/releases/20170608164312/storage

$ rm -rf /var/www/html/login/releases/20170608164312/bootstrap/cache
rm -rf /var/www/html/login/releases/20170608164312/bootstrap/cache

$ ln -s /var/www/html/login/shared/bootstrap/cache /var/www/html/login/releases/20170608164312/bootstrap/cache-temp
$ mv -Tf /var/www/html/login/releases/20170608164312/bootstrap/cache-temp /var/www/html/login/releases/20170608164312/bootstrap/cache
ln -s /var/www/html/login/shared/bootstrap/cache /var/www/html/login/releases/20170608164312/bootstrap/cache-temp
mv -Tf /var/www/html/login/releases/20170608164312/bootstrap/cache-temp /var/www/html/login/releases/20170608164312/bootstrap/cache

$ ln -s /var/www/html/login/shared/.env /var/www/html/login/releases/20170608164312/.env-temp
$ mv -Tf /var/www/html/login/releases/20170608164312/.env-temp /var/www/html/login/releases/20170608164312/.env
ln -s /var/www/html/login/shared/.env /var/www/html/login/releases/20170608164312/.env-temp
mv -Tf /var/www/html/login/releases/20170608164312/.env-temp /var/www/html/login/releases/20170608164312/.env

$ cd /var/www/html/login/releases/20170608164312
$ chmod -R 755 /var/www/html/login/releases/20170608164312/storage
$ chmod -R g+s /var/www/html/login/releases/20170608164312/storage
$ chown -R www-data:www-data /var/www/html/login/releases/20170608164312/storage
cd /var/www/html/login/releases/20170608164312
chmod -R 755 /var/www/html/login/releases/20170608164312/storage
chmod -R g+s /var/www/html/login/releases/20170608164312/storage
chown -R www-data:www-data /var/www/html/login/releases/20170608164312/storage
chown: invalid user: ‘www-data:www-data’
$ cd /var/www/html/login/releases/20170608164312
$ chmod -R 755 /var/www/html/login/releases/20170608164312/public
$ chmod -R g+s /var/www/html/login/releases/20170608164312/public
$ chown -R www-data:www-data /var/www/html/login/releases/20170608164312/public
cd /var/www/html/login/releases/20170608164312
chmod -R 755 /var/www/html/login/releases/20170608164312/public
chmod -R g+s /var/www/html/login/releases/20170608164312/public
chown -R www-data:www-data /var/www/html/login/releases/20170608164312/public
chown: invalid user: ‘www-data:www-data’
$ cd /var/www/html/login/releases/20170608164312
$ yarn
cd /var/www/html/login/releases/20170608164312
yarn
yarn install v0.24.5
[1/4] Resolving packages...
[2/4] Fetching packages...
warning fsevents@1.1.1: The platform "linux" is incompatible with this module.
info "fsevents@1.1.1" is an optional dependency and failed compatibility check. Excluding it from installation.
[3/4] Linking dependencies...
[4/4] Building fresh packages...
success Saved lockfile.
Done in 33.10s.
$ cd /var/www/html/login/releases/20170608164312
$ npm run dev
cd /var/www/html/login/releases/20170608164312
npm run dev
> @ dev /var/www/html/login/releases/20170608164312
> npm run development


> @ development /var/www/html/login/releases/20170608164312
> cross-env NODE_ENV=development node_modules/webpack/bin/webpack.js --progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js

Copying resources/assets/js/front/ to /var/www/html/login/releases/20170608164312/public/js
Copying resources/assets/css/front/ to /var/www/html/login/releases/20170608164312/public/css
  0% compiling 10% building modules 0/1 modules 1 active ...modules/laravel-mix/src/mock-entry.js                                          10% building modules 1/1 modules 0 active 10% building modules 1/2 modules 1 active ...modules/laravel-mix/src/mock-entry.js                                          10% building modules 2/2 modules 0 active                               71% sealing 72% optimizing 73% basic module optimization       74% module optimization 75% advanced module optimization     76% basic chunk optimization       77% chunk optimization 78% advanced chunk optimization 79% module and chunk tree optimization                    80% module reviving 81% module order optimization    82% module id optimization         83% chunk reviving 84% chunk order optimization    85% chunk id optimization               86% hashing 87% module assets processing  88% chunk assets processing 89% additional chunk assets processing                          90% recording 91% additional asset processing    92% chunk asset optimization       94% asset optimization           95% emitting DONE  Compiled successfully in 108ms4:57:36 PM

                         Asset      Size  Chunks             Chunk Names
mix-manifest.json  26 bytes          [emitted]
$ cd /var/www/html/login/releases/20170608164312
$ php artisan migrate --force
cd /var/www/html/login/releases/20170608164312
php artisan migrate --force
Nothing to migrate.
$ ln -s /var/www/html/login/releases/20170608164312 /var/www/html/login/current-temp
$ mv -Tf /var/www/html/login/current-temp /var/www/html/login/current
ln -s /var/www/html/login/releases/20170608164312 /var/www/html/login/current-temp
mv -Tf /var/www/html/login/current-temp /var/www/html/login/current

|=> Successfully deployed release 20170608164312
|=> No releases to prune from the server